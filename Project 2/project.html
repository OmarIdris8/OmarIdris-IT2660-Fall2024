<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Tri-C Lemonade Stand LLC - Point of Sales</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <link href="normalize.css" rel="stylesheet">
    <link href="skeleton.css" rel="stylesheet">
    <link href="project.css" rel="stylesheet">
    <script src="project.js"></script>
    <style>
        div#itemsParent {
            padding: 15px;
            background-color: #f3f3f3;
        }
    </style>
    <script>

        let order = {};
        //define counts
        let classCount = 0;
        let strawCount = 0;
        let specCount = 0;
        $(document).ready(function () {

            //update item quantity in li
            $('#itemsList').append(`<li id="classItem" class="item">Classic Lemonade x<span id="classCount">${classCount}</span>: <span id="classPrice">$0.00</span></li>`);
            $('#itemsList').append(`<li id="strawItem" class="item">Strawberry Lemonade x<span id="strawCount">${strawCount}</span>: <span id="strawPrice">$0.00</span></li>`);
            $('#itemsList').append(`<li id="specItem" class="item">Special Limeade x<span id="specCount">${specCount}</span>: <span id="specPrice">$0.00</span></li>`);
        });
        function addToOrder(item) {
            switch (item) {
                case 'classic':
                    classCount++;
                    break;
                case 'straw':
                    strawCount++;
                    break;
                case 'spec':
                    specCount++;
                    break;
                default:
                    break;
            }

            //Check item in order
            if (item in order) {
                order[item].quantity++;
                //add item to order   
            } else {
                order[item] = { quantity: 1, price: getPrice(item) };
            }

            //update individual item price display
            const itemPrice = $(`#${item.replace(/ /g, "")}Price`);
            itemPrice.text(`$${(order[item].quantity * order[item].price).toFixed(2)}`);

            //update quantity
            const itemQuantity = $(`#${item.replace(/ /g, "")}Count`);
            itemQuantity.text(order[item].quantity);


            //update total price
            updateTotal();

            //update trans block with text and count
            $('#classCount').text(classCount);
            $('#strawCount').text(strawCount);
            $('#specCount').text(specCount);

            // update item quantity in li
            $('#classCount').text(classCount);
            $('#classPrice').text(`$${(classCount * getPrice('classic')).toFixed(2)}`);

            $('#strawCount').text(strawCount);
            $('#strawPrice').text(`$${(strawCount * getPrice('straw')).toFixed(2)}`);

            $('#specCount').text(specCount);
            $('#specPrice').text(`$${(specCount * getPrice('spec')).toFixed(2)}`);

        }
        function removeFromOrder(item) {
            // Check if the item is in the order
            if (item in order) {
                // Decrease quantity by 1, but don't allow negative quantities
                order[item].quantity = Math.max(0, order[item].quantity - 1);

                //update individual item price display
                const itemPrice = $(`#${item.replace(/ /g, "")}Price`);
                itemPrice.text(`$${(order[item].quantity * order[item].price).toFixed(2)}`);

                //update quantity
                const itemQuantity = $(`#${item.replace(/ /g, "")}Count`);
                itemQuantity.text(order[item].quantity);

                // Remove the item from the order if quantity is now 0
                if (order[item].quantity === 0) {
                    delete order[item];
                }

                // Update the total price display
                updateTotal();

                // Update the corresponding count in the transaction block
                switch (item) {
                    case 'classic':
                        classCount--;
                        $('#classCount').text(classCount);
                        $('#classPrice').text(`$${(classCount * getPrice('classic')).toFixed(2)}`);
                        break;
                    case 'straw':
                        strawCount--;
                        $('#strawCount').text(strawCount);
                        $('#strawPrice').text(`$${(strawCount * getPrice('straw')).toFixed(2)}`);
                        break;
                    case 'spec':
                        specCount--;
                        $('#specCount').text(specCount);
                        $('#specPrice').text(`$${(specCount * getPrice('spec')).toFixed(2)}`);
                        break;
                    default:
                        break;
                }
            }
        }

        function clearAllItems() {
            order = {}; // Clear the order
            const itemList = document.getElementById('itemsList');
            itemList.innerHTML = ''; // Remove all list items from the order list
            updateTotal(); // Update the total price display

            // Reset the counts
            classCount = 0;
            strawCount = 0;
            specCount = 0;

            // Update the corresponding counts in the transaction block
            $('#classCount').text(classCount);
            $('#strawCount').text(strawCount);
            $('#specCount').text(specCount);

            // Reset the individual item prices in the transaction block
            $('#classPrice').text(`$0.00`);
            $('#strawPrice').text(`$0.00`);
            $('#specPrice').text(`$0.00`);

            // Reset the total price in the transaction block
            $('#total').text('$0.00');

             //update item quantity in li
             $('#itemsList').append(`<li id="classItem" class="item">Classic Lemonade x<span id="classCount">${classCount}</span>: <span id="classPrice">$0.00</span></li>`);
            $('#itemsList').append(`<li id="strawItem" class="item">Strawberry Lemonade x<span id="strawCount">${strawCount}</span>: <span id="strawPrice">$0.00</span></li>`);
            $('#itemsList').append(`<li id="specItem" class="item">Special Limeade x<span id="specCount">${specCount}</span>: <span id="specPrice">$0.00</span></li>`);
        }

        function getPrice(item) {
            switch (item) {
                case 'classic':
                    return 5.00;
                case 'straw':
                    return 6.00;
                case 'spec':
                    return 8.00;
                default:
                    return 0.00;
            }

        }
        function updateTotal() {
            let total = 0;
            for (const { quantity, price } of Object.values(order)) {
                total += quantity * price;
            }
            const totalElement = document.getElementById('total');
            totalElement.textContent = `$${total.toFixed(2)}`;
        }

    </script>
</head>

<body>
    <div class="container">
        <header class="mainheader">
            <h1>
                <img src="logo.png" height="150" />
                &nbsp;&nbsp;
                Tri-C Lemonade Point of Sales
            </h1>
        </header>
        <div class="left">
            <nav>
                <ul>
                    <li><a href="project.html">Home</a></li>
                    <li><a href="https://www.tri-c.edu" target="_blank">Tri-C.edu</a></li>
                </ul>
            </nav>
        </div>
        <div class="maincontent">
            <p>
                Welcome to the official point of sales sytem for the Tri-C Lemonade Stand! This is where you can create
                an
                order for a lemonade stand customer!
            </p>
            <ul class="panels">
                <li>
                    <h4>Classic Lemonade</h4>
                    <p>
                        You can't go wrong with a drink that has satisfied thirsty people for years. Take home a classic
                        today!
                    </p>
                    <p><strong>$5.00</strong></p>
                    <button onclick="addToOrder('classic')">Add</button><br>
                    <button onclick="removeFromOrder('classic')">Remove</button>
                </li>
                <li>
                    <h4>Strawberry Lemonade</h4>
                    <p>
                        The merging of two classic flavors into one! Enjoy this solid twist on traditional lemonade. A
                        crowd
                        pleaser.
                    </p>
                    <p><strong>$6.00</strong></p>
                    <button onclick="addToOrder('straw')">Add</button><br>
                    <button onclick="removeFromOrder('straw')">Remove</button>
                </li>
                <li>
                    <h4>Special Limeade</h4>
                    <p>
                        A fresh take on a classic drink, Limeade will be sure to please those that prefer the taste of
                        lime
                        and sugar.
                    </p>
                    <p><strong>$8.00</strong></p>
                    <button onclick="addToOrder('spec')">Add</button><br>
                    <button onclick="removeFromOrder('spec')">Remove</button>
                </li>
            </ul>
            <div id="itemsParent">
                <h5>Transaction Items:</h5>
                <ul id="itemsList">
                    <!-- add the list items here -->
                </ul>
                <button onclick="clearAllItems()">Clear Items</button>
                <h5>Total: <span id="total">$0.00</span></h5>
            </div>
            <footer class="mainfooter">
                Page layout sourced from <a href="https://gridbyexample.com/examples/page-layout/" target="_blank">Grid
                    By
                    Example</a>.<br />
                Find out about Skeleton <a href="http://getskeleton.com/" target="_blank">here</a>.
            </footer>
        </div>
</body>

</html>